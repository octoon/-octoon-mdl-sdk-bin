<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Example for the Discovery of MDL Modules</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="images/arcicon.ico" rel="shortcut icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_custom_stylesheet_1_8_4.css" rel="stylesheet" type="text/css"/>
<link rel='stylesheet' href='webfonts/librebaskerville/stylesheet.css' type='text/css'/>
<link rel='stylesheet' href='webfonts/sourcesanspro/stylesheet.css' type='text/css'/>
<!--ARC-->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="blackheader">
<span id="blackheader_title">MDL SDK API</span>
<span>
<img src="images/nvidia_logo_transpbg.gif" alt="nvidia_logo_transpbg.gif" style=" height:1.25em; width:6.806em;"/></span>
<span id="blackheader_uplink">
<a href='../index.html' class='top_page_nav'>Up</a>
</span>
</div>
<!--
<div id="titlearea">
   <span id="projectname">
     <a id="titlelink" href="../../index.html">
       MDL SDK API
     </a>
   </span>
     <a id="projectlogo" href="http://www.nvidia-arc.com">
       <img alt="NVIDIA logo" src="images/nvidia_logo.png" style="height:2em;">
       </a>
     <a href='../index.html' class='top_page_nav'>Up</a>
</div>
-->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mi_neuray_example_discovery.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Example for the Discovery of MDL Modules </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div align="right"> [<a class="el" href="mi_neuray_example_create_module.html">Previous</a>] [<a class="el" href="mi_neuray_examples.html">Up</a>] [<a class="el" href="mi_neuray_example_mdl_browser.html">Next</a>] </div><p>This example introduces the MDL Discovery Api that helps to overview the MDL includes.</p>
<h1><a class="anchor" id="example_discovery_new"></a>
New Topics</h1>
<ul>
<li>Using the <a class="el" href="classmi_1_1neuraylib_1_1IMdl__discovery__api.html" title="Interface for the discovery API. ">mi::neuraylib::IMdl_discovery_api</a> to discover MDL archives, packages and modules.</li>
</ul>
<h1><a class="anchor" id="example_discovery_descr"></a>
Detailed Description</h1>
<dl>
<dt><b> Discovering MDL archives, packages and modules </b> </dt>
<dd><p class="startdd"><br/>
 The <a class="el" href="classmi_1_1neuraylib_1_1IMdl__discovery__api.html" title="Interface for the discovery API. ">mi::neuraylib::IMdl_discovery_api</a> eases the discovery of available MDL modules by providing a graph view on all MDL packages and modules that can be found in the currently installed search paths.</p>
<p>In this example we will show how to use the <a class="el" href="classmi_1_1neuraylib_1_1IMdl__discovery__api.html" title="Interface for the discovery API. ">mi::neuraylib::IMdl_discovery_api</a> and how to traverse the resulting graph structure provided as <a class="el" href="classmi_1_1neuraylib_1_1IMdl__discovery__result.html" title="Interface for the discovery result. ">mi::neuraylib::IMdl_discovery_result</a>. As a first step we register the MDL search paths by calling the function <code>configure()</code>, where all paths given on the command line are added to the MDL compiler by using the method <code>add_module_path()</code>. The next step is to retrieve a pointer to the <a class="el" href="classmi_1_1neuraylib_1_1IMdl__discovery__api.html" title="Interface for the discovery API. ">mi::neuraylib::IMdl_discovery_api</a> interface and call the method <code>discover()</code>. As a result a <a class="el" href="classmi_1_1neuraylib_1_1IMdl__discovery__result.html" title="Interface for the discovery result. ">mi::neuraylib::IMdl_discovery_result</a> will be returned, which contains a pointer to the discovered MDL graph structure. An example how to traverse this MDL graph structure is shown in the function <code>log_api_package()</code>. The given data structure is a simple directed graph consisting of nodes representing MDL packages and modules. Starting from the root node, the recursive function <code>log_api_package()</code> traverses through of the graph and interprets each node, depending of the given <a class="el" href="classmi_1_1neuraylib_1_1IMdl__info.html#a0ce72da02571e3f4c64e15c5a606ca55" title="The kinds of the graph nodes. ">mi::neuraylib::IMdl_info::Kind</a> type. If a <a class="el" href="classmi_1_1neuraylib_1_1IMdl__package__info.html" title="Interface for a graph node representing an MDL package. ">mi::neuraylib::IMdl_package_info</a> kind is found, that has been declared in multiple search paths, all these paths are listed to the log output. If a <a class="el" href="classmi_1_1neuraylib_1_1IMdl__module__info.html" title="Interface for a graph node representing an MDL module. ">mi::neuraylib::IMdl_module_info</a> is found, that shadows modules from other search paths, this is indicated in the log output as well. <br/>
 This information makes it easier to overview the interaction of modules and packages from various sources no matter if they have been discovered a from file systems or from an archive.</p>
<p class="enddd"></p>
</dd>
</dl>
<h1><a class="anchor" id="example_discovery"></a>
Example Source</h1>
<p><b>Source Code Location:</b> <code>examples/mdl_sdk/discovery/example_discovery.cpp</code></p>
<div class="fragment"><div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment"> * Copyright 2022 NVIDIA Corporation. All rights reserved.</span></div>
<div class="line"><span class="comment"> *****************************************************************************/</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// examples/mdl_sdk/discovery/example_discovery.cpp</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Discovers MDL files in file system and MDL archives and measures the traversal time</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;chrono&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ctime&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;example_shared.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">using namespace </span>mi::neuraylib;</div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"></div>
<div class="line"><span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// Converts a kind to a string</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line">std::string DK_to_string(<a class="code" href="classmi_1_1neuraylib_1_1IMdl__info.html#a0ce72da02571e3f4c64e15c5a606ca55" title="The kinds of the graph nodes. ">IMdl_info::Kind</a> kind)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span> (kind)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">case</span> IMdl_info::DK_PACKAGE: <span class="keywordflow">return</span> <span class="stringliteral">&quot;DK_PACKAGE&quot;</span>;</div>
<div class="line">        <span class="keywordflow">case</span> IMdl_info::DK_MODULE: <span class="keywordflow">return</span> <span class="stringliteral">&quot;DK_MODULE&quot;</span>;</div>
<div class="line">        <span class="keywordflow">case</span> IMdl_info::DK_XLIFF: <span class="keywordflow">return</span> <span class="stringliteral">&quot;DK_XLIFF&quot;</span>;</div>
<div class="line">        <span class="keywordflow">case</span> IMdl_info::DK_LIGHTPROFILE: <span class="keywordflow">return</span> <span class="stringliteral">&quot;DK_LIGHTPROFILE&quot;</span>;</div>
<div class="line">        <span class="keywordflow">case</span> IMdl_info::DK_TEXTURE: <span class="keywordflow">return</span> <span class="stringliteral">&quot;DK_TEXTURE&quot;</span>;</div>
<div class="line">        <span class="keywordflow">case</span> IMdl_info::DK_MEASURED_BSDF: <span class="keywordflow">return</span> <span class="stringliteral">&quot;DK_MEASURED_BSDF&quot;</span>;</div>
<div class="line">        <span class="keywordflow">case</span> IMdl_info::DK_DIRECTORY: <span class="keywordflow">return</span> <span class="stringliteral">&quot;DK_DIRECTORY&quot;</span>;</div>
<div class="line">        <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;UNKNOWN&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// Converts a string to a kind</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><a class="code" href="classmi_1_1neuraylib_1_1IMdl__info.html#a0ce72da02571e3f4c64e15c5a606ca55" title="The kinds of the graph nodes. ">IMdl_info::Kind</a> string_to_DK(std::string s)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(s.c_str(), <span class="stringliteral">&quot;DK_PACKAGE&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> IMdl_info::DK_PACKAGE;</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(s.c_str(), <span class="stringliteral">&quot;DK_MODULE&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> IMdl_info::DK_MODULE;</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(s.c_str(), <span class="stringliteral">&quot;DK_XLIFF&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> IMdl_info::DK_XLIFF;</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(s.c_str(), <span class="stringliteral">&quot;DK_LIGHTPROFILE&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> IMdl_info::DK_LIGHTPROFILE;</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(s.c_str(), <span class="stringliteral">&quot;DK_TEXTURE&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> IMdl_info::DK_TEXTURE;</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(s.c_str(), <span class="stringliteral">&quot;DK_MEASURED_BSDF&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> IMdl_info::DK_MEASURED_BSDF;</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(s.c_str(), <span class="stringliteral">&quot;DK_DIRECTORY&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> IMdl_info::DK_DIRECTORY;</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(s.c_str(), <span class="stringliteral">&quot;DK_ALL&quot;</span>) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> IMdl_info::DK_ALL;</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        cerr &lt;&lt; <span class="stringliteral">&quot;\nWarning: Unexpected kind type &quot;</span> &lt;&lt; s.c_str();</div>
<div class="line">        cerr &lt;&lt; <span class="stringliteral">&quot;. Filtering will be disabled.\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> IMdl_info::DK_ALL;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> log_default_attributes(</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* shift,</div>
<div class="line">    <a class="code" href="group__mi__base__types.html#gaa8e6476e3c0fc948ef75264572568791" title="Unsigned integral type that is large enough to hold the size of all types. ">mi::Size</a> search_path_index,</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* search_path,</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* resolved_path,</div>
<div class="line">    <span class="keywordtype">bool</span> in_archive)</div>
<div class="line">{</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; shift &lt;&lt; <span class="stringliteral">&quot;search path index: &quot;</span> &lt;&lt; search_path_index;</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; shift &lt;&lt; <span class="stringliteral">&quot;search path: &quot;</span> &lt;&lt; search_path;</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; shift &lt;&lt; <span class="stringliteral">&quot;resolved path: &quot;</span> &lt;&lt; resolved_path;</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; shift &lt;&lt; <span class="stringliteral">&quot;found in archive: &quot;</span> &lt;&lt; in_archive;</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">}</div>
<div class="line"><span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">// Helper function for discovery logging</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">void</span> log_api_package(<span class="keyword">const</span> <a class="code" href="classmi_1_1neuraylib_1_1IMdl__info.html" title="Abstract interface for a discovery graph node. ">IMdl_info</a>* info, <span class="keywordtype">int</span> level)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">string</span> shift(<span class="stringliteral">&quot;  &quot;</span>);</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; level; s++)</div>
<div class="line">        shift.append(<span class="stringliteral">&quot;  &quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (info == <span class="keyword">nullptr</span>) {</div>
<div class="line">        cerr &lt;&lt; <span class="stringliteral">&quot;\nError: Unexpected empty kind!\n&quot;</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> { </div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve base properties</span></div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; shift.c_str() &lt;&lt; <span class="stringliteral">&quot;simple name: &quot;</span> &lt;&lt; info-&gt;<a class="code" href="classmi_1_1neuraylib_1_1IMdl__info.html#a8649aa864b6ce34c4c5b591644cb15bf" title="Returns the simple_name (tail of the qualified_name) of the graph node. ">get_simple_name</a>();</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; shift.c_str() &lt;&lt; <span class="stringliteral">&quot;qualified name: &quot;</span> &lt;&lt; info-&gt;<a class="code" href="classmi_1_1neuraylib_1_1IMdl__info.html#a106278431373ec905c2a2990c14f7273" title="Returns the qualified name of the graph node. ">get_qualified_name</a>();</div>
<div class="line"></div>
<div class="line">        <a class="code" href="classmi_1_1neuraylib_1_1IMdl__info.html#a0ce72da02571e3f4c64e15c5a606ca55" title="The kinds of the graph nodes. ">mi::neuraylib::IMdl_info::Kind</a> k = info-&gt;<a class="code" href="classmi_1_1neuraylib_1_1IMdl__info.html#a668e866b306d92ceaf59d4746d6dd838" title="Returns the kind of the graph node. ">get_kind</a>();</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; shift.c_str() &lt;&lt; <span class="stringliteral">&quot;kind: &quot;</span> &lt;&lt; DK_to_string(k);</div>
<div class="line">        <span class="comment">// Retrieve xliff properties</span></div>
<div class="line">        <span class="keywordflow">if</span> (info-&gt;<a class="code" href="classmi_1_1neuraylib_1_1IMdl__info.html#a668e866b306d92ceaf59d4746d6dd838" title="Returns the kind of the graph node. ">get_kind</a>() == IMdl_info::DK_XLIFF) {</div>
<div class="line">            <span class="keyword">const</span> <a class="code" href="classmi_1_1base_1_1Handle.html" title="Handle class template for interfaces, automatizing the lifetime control via reference counting...">mi::base::Handle&lt;const IMdl_xliff_info&gt;</a> xliff_info(</div>
<div class="line">                info-&gt;<a class="code" href="classmi_1_1base_1_1IInterface.html#aa24ef1b57dcff38f9abafc420978df5c" title="Acquires a const interface from another. ">get_interface</a>&lt;<span class="keyword">const</span> <a class="code" href="classmi_1_1neuraylib_1_1IMdl__xliff__info.html" title="Interface for xliff files. ">IMdl_xliff_info</a>&gt;());</div>
<div class="line">            log_default_attributes(</div>
<div class="line">                shift.c_str(),</div>
<div class="line">                xliff_info-&gt;get_search_path_index(),</div>
<div class="line">                xliff_info-&gt;get_search_path(),</div>
<div class="line">                xliff_info-&gt;get_resolved_path(),</div>
<div class="line">                xliff_info-&gt;in_archive());</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve texture properties</span></div>
<div class="line">        <span class="keywordflow">if</span> (info-&gt;<a class="code" href="classmi_1_1neuraylib_1_1IMdl__info.html#a668e866b306d92ceaf59d4746d6dd838" title="Returns the kind of the graph node. ">get_kind</a>() == IMdl_info::DK_TEXTURE) {</div>
<div class="line">            <span class="keyword">const</span> <a class="code" href="classmi_1_1base_1_1Handle.html" title="Handle class template for interfaces, automatizing the lifetime control via reference counting...">mi::base::Handle&lt;const IMdl_texture_info&gt;</a> texture_info(</div>
<div class="line">                info-&gt;<a class="code" href="classmi_1_1base_1_1IInterface.html#aa24ef1b57dcff38f9abafc420978df5c" title="Acquires a const interface from another. ">get_interface</a>&lt;<span class="keyword">const</span> <a class="code" href="classmi_1_1neuraylib_1_1IMdl__texture__info.html" title="Interface for texture files. ">IMdl_texture_info</a>&gt;());</div>
<div class="line">            log_default_attributes(</div>
<div class="line">                shift.c_str(),</div>
<div class="line">                texture_info-&gt;get_search_path_index(),</div>
<div class="line">                texture_info-&gt;get_search_path(),</div>
<div class="line">                texture_info-&gt;get_resolved_path(),</div>
<div class="line">                texture_info-&gt;in_archive());</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; shift.c_str() &lt;&lt; <span class="stringliteral">&quot;number of shadows: &quot;</span></div>
<div class="line">                &lt;&lt; texture_info-&gt;get_shadows_count();</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">for</span> (<a class="code" href="group__mi__base__types.html#gaa8e6476e3c0fc948ef75264572568791" title="Unsigned integral type that is large enough to hold the size of all types. ">mi::Size</a> s = 0; s &lt; texture_info-&gt;get_shadows_count(); s++)</div>
<div class="line">            {</div>
<div class="line">                <span class="keyword">const</span> <a class="code" href="classmi_1_1base_1_1Handle.html" title="Handle class template for interfaces, automatizing the lifetime control via reference counting...">mi::base::Handle&lt;const IMdl_resource_info&gt;</a> sh(texture_info-&gt;get_shadow(s));</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; shift.c_str() &lt;&lt; <span class="stringliteral">&quot;* in search path: &quot;</span> &lt;&lt; sh-&gt;get_search_path();</div>
<div class="line">            }</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve lightprofile properties</span></div>
<div class="line">        <span class="keywordflow">if</span> (info-&gt;<a class="code" href="classmi_1_1neuraylib_1_1IMdl__info.html#a668e866b306d92ceaf59d4746d6dd838" title="Returns the kind of the graph node. ">get_kind</a>() == IMdl_info::DK_LIGHTPROFILE) {</div>
<div class="line">            <span class="keyword">const</span> <a class="code" href="classmi_1_1base_1_1Handle.html" title="Handle class template for interfaces, automatizing the lifetime control via reference counting...">mi::base::Handle&lt;const IMdl_lightprofile_info&gt;</a> lightprofile_info(</div>
<div class="line">                info-&gt;<a class="code" href="classmi_1_1base_1_1IInterface.html#aa24ef1b57dcff38f9abafc420978df5c" title="Acquires a const interface from another. ">get_interface</a>&lt;<span class="keyword">const</span> <a class="code" href="classmi_1_1neuraylib_1_1IMdl__lightprofile__info.html" title="Interface for lightprofile files. ">IMdl_lightprofile_info</a>&gt;());</div>
<div class="line">            log_default_attributes(</div>
<div class="line">                shift.c_str(),</div>
<div class="line">                lightprofile_info-&gt;get_search_path_index(),</div>
<div class="line">                lightprofile_info-&gt;get_search_path(),</div>
<div class="line">                lightprofile_info-&gt;get_resolved_path(),</div>
<div class="line">                lightprofile_info-&gt;in_archive());</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; shift.c_str() &lt;&lt; <span class="stringliteral">&quot;number of shadows: &quot;</span></div>
<div class="line">                &lt;&lt; lightprofile_info-&gt;get_shadows_count();</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">for</span> (<a class="code" href="group__mi__base__types.html#gaa8e6476e3c0fc948ef75264572568791" title="Unsigned integral type that is large enough to hold the size of all types. ">mi::Size</a> s = 0; s &lt; lightprofile_info-&gt;get_shadows_count(); s++)</div>
<div class="line">            {</div>
<div class="line">                <span class="keyword">const</span> <a class="code" href="classmi_1_1base_1_1Handle.html" title="Handle class template for interfaces, automatizing the lifetime control via reference counting...">mi::base::Handle&lt;const IMdl_resource_info&gt;</a> sh(lightprofile_info-&gt;get_shadow(s));</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; shift.c_str() &lt;&lt; <span class="stringliteral">&quot;* in search path: &quot;</span> &lt;&lt; sh-&gt;get_search_path();</div>
<div class="line">            }</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve bsdf properties</span></div>
<div class="line">        <span class="keywordflow">if</span> (info-&gt;<a class="code" href="classmi_1_1neuraylib_1_1IMdl__info.html#a668e866b306d92ceaf59d4746d6dd838" title="Returns the kind of the graph node. ">get_kind</a>() == IMdl_info::DK_MEASURED_BSDF) {</div>
<div class="line">            <span class="keyword">const</span> <a class="code" href="classmi_1_1base_1_1Handle.html" title="Handle class template for interfaces, automatizing the lifetime control via reference counting...">mi::base::Handle&lt;const IMdl_measured_bsdf_info&gt;</a> bsdf_info(</div>
<div class="line">                info-&gt;<a class="code" href="classmi_1_1base_1_1IInterface.html#aa24ef1b57dcff38f9abafc420978df5c" title="Acquires a const interface from another. ">get_interface</a>&lt;<span class="keyword">const</span> <a class="code" href="classmi_1_1neuraylib_1_1IMdl__measured__bsdf__info.html" title="Interface for measured bsdf files. ">IMdl_measured_bsdf_info</a>&gt;());</div>
<div class="line">            log_default_attributes(</div>
<div class="line">                shift.c_str(),</div>
<div class="line">                bsdf_info-&gt;get_search_path_index(),</div>
<div class="line">                bsdf_info-&gt;get_search_path(),</div>
<div class="line">                bsdf_info-&gt;get_resolved_path(),</div>
<div class="line">                bsdf_info-&gt;in_archive());</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; shift.c_str() &lt;&lt; <span class="stringliteral">&quot;number of shadows: &quot;</span></div>
<div class="line">                &lt;&lt; bsdf_info-&gt;get_shadows_count();</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">for</span> (<a class="code" href="group__mi__base__types.html#gaa8e6476e3c0fc948ef75264572568791" title="Unsigned integral type that is large enough to hold the size of all types. ">mi::Size</a> s = 0; s &lt; bsdf_info-&gt;get_shadows_count(); s++)</div>
<div class="line">            {</div>
<div class="line">                <span class="keyword">const</span> <a class="code" href="classmi_1_1base_1_1Handle.html" title="Handle class template for interfaces, automatizing the lifetime control via reference counting...">mi::base::Handle&lt;const IMdl_resource_info&gt;</a> sh(bsdf_info-&gt;get_shadow(s));</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; shift.c_str() &lt;&lt; <span class="stringliteral">&quot;* in search path: &quot;</span> &lt;&lt; sh-&gt;get_search_path();</div>
<div class="line">            }</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve module properties</span></div>
<div class="line">        <span class="keywordflow">if</span> (info-&gt;<a class="code" href="classmi_1_1neuraylib_1_1IMdl__info.html#a668e866b306d92ceaf59d4746d6dd838" title="Returns the kind of the graph node. ">get_kind</a>() == IMdl_info::DK_MODULE)</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">const</span> <a class="code" href="classmi_1_1base_1_1Handle.html" title="Handle class template for interfaces, automatizing the lifetime control via reference counting...">mi::base::Handle&lt;const IMdl_module_info&gt;</a> module_info(</div>
<div class="line">                info-&gt;<a class="code" href="classmi_1_1base_1_1IInterface.html#aa24ef1b57dcff38f9abafc420978df5c" title="Acquires a const interface from another. ">get_interface</a>&lt;<span class="keyword">const</span> <a class="code" href="classmi_1_1neuraylib_1_1IMdl__module__info.html" title="Interface for a graph node representing an MDL module. ">IMdl_module_info</a>&gt;());</div>
<div class="line">            log_default_attributes(</div>
<div class="line">                shift.c_str(),</div>
<div class="line">                module_info-&gt;get_search_path_index(),</div>
<div class="line">                module_info-&gt;get_search_path(),</div>
<div class="line">                module_info-&gt;get_resolved_path()-&gt;get_c_str(),</div>
<div class="line">                module_info-&gt;in_archive());</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; shift.c_str() &lt;&lt; <span class="stringliteral">&quot;number of shadows: &quot;</span></div>
<div class="line">                &lt;&lt; module_info-&gt;get_shadows_count();</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">for</span> (<a class="code" href="group__mi__base__types.html#gaa8e6476e3c0fc948ef75264572568791" title="Unsigned integral type that is large enough to hold the size of all types. ">mi::Size</a> s = 0; s &lt; module_info-&gt;get_shadows_count(); s++)</div>
<div class="line">            {</div>
<div class="line">                <span class="keyword">const</span> <a class="code" href="classmi_1_1base_1_1Handle.html" title="Handle class template for interfaces, automatizing the lifetime control via reference counting...">mi::base::Handle&lt;const IMdl_module_info&gt;</a> sh(module_info-&gt;get_shadow(s));</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; shift.c_str() &lt;&lt; <span class="stringliteral">&quot;* in search path: &quot;</span> &lt;&lt; sh-&gt;get_search_path();</div>
<div class="line">            }</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Retrieve package or directory properties</span></div>
<div class="line">        <span class="keywordflow">if</span> ((info-&gt;<a class="code" href="classmi_1_1neuraylib_1_1IMdl__info.html#a668e866b306d92ceaf59d4746d6dd838" title="Returns the kind of the graph node. ">get_kind</a>() == IMdl_info::DK_PACKAGE)||</div>
<div class="line">            (info-&gt;<a class="code" href="classmi_1_1neuraylib_1_1IMdl__info.html#a668e866b306d92ceaf59d4746d6dd838" title="Returns the kind of the graph node. ">get_kind</a>() == IMdl_info::DK_DIRECTORY))</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">const</span> <a class="code" href="classmi_1_1base_1_1Handle.html" title="Handle class template for interfaces, automatizing the lifetime control via reference counting...">mi::base::Handle&lt;const IMdl_package_info&gt;</a> package_info(</div>
<div class="line">                info-&gt;<a class="code" href="classmi_1_1base_1_1IInterface.html#aa24ef1b57dcff38f9abafc420978df5c" title="Acquires a const interface from another. ">get_interface</a>&lt;<span class="keyword">const</span> <a class="code" href="classmi_1_1neuraylib_1_1IMdl__package__info.html" title="Interface for a graph node representing an MDL package. ">IMdl_package_info</a>&gt;());</div>
<div class="line"></div>
<div class="line">            <span class="keyword">const</span> <a class="code" href="group__mi__base__types.html#gaa8e6476e3c0fc948ef75264572568791" title="Unsigned integral type that is large enough to hold the size of all types. ">mi::Size</a> spi_count = package_info-&gt;get_search_path_index_count();</div>
<div class="line">            <span class="keywordflow">if</span> (spi_count &gt; 0)</div>
<div class="line">            {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; shift.c_str() &lt;&lt; <span class="stringliteral">&quot;discovered in &quot;</span> &lt;&lt; spi_count &lt;&lt; <span class="stringliteral">&quot; search paths:&quot;</span>;</div>
<div class="line">                <span class="keywordflow">for</span> (<a class="code" href="group__mi__base__types.html#gaa8e6476e3c0fc948ef75264572568791" title="Unsigned integral type that is large enough to hold the size of all types. ">mi::Size</a> i = 0; i &lt; spi_count; ++i)</div>
<div class="line">                {</div>
<div class="line">                    log_default_attributes(</div>
<div class="line">                        shift.c_str(),</div>
<div class="line">                        package_info-&gt;get_search_path_index(i),</div>
<div class="line">                        package_info-&gt;get_search_path(i),</div>
<div class="line">                        package_info-&gt;get_resolved_path(i)-&gt;get_c_str(),</div>
<div class="line">                        package_info-&gt;in_archive(i));</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Recursively iterate over all sub-packages and modules</span></div>
<div class="line">            <span class="keyword">const</span> <a class="code" href="group__mi__base__types.html#gaa8e6476e3c0fc948ef75264572568791" title="Unsigned integral type that is large enough to hold the size of all types. ">mi::Size</a> child_count = package_info-&gt;get_child_count();</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; shift.c_str() &lt;&lt; <span class="stringliteral">&quot;number of children: &quot;</span> &lt;&lt; child_count;</div>
<div class="line">            <span class="keywordflow">if</span> (child_count &gt; 0) cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">            <span class="keywordflow">for</span> (<a class="code" href="group__mi__base__types.html#gaa8e6476e3c0fc948ef75264572568791" title="Unsigned integral type that is large enough to hold the size of all types. ">mi::Size</a> i = 0; i &lt; child_count; i++)</div>
<div class="line">            {</div>
<div class="line">                <span class="keyword">const</span> <a class="code" href="classmi_1_1base_1_1Handle.html" title="Handle class template for interfaces, automatizing the lifetime control via reference counting...">mi::base::Handle&lt;const IMdl_info&gt;</a> child(package_info-&gt;get_child(i));</div>
<div class="line">                log_api_package(child.get(), level + 1);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> (child_count == 0) cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    cerr &lt;&lt; <span class="stringliteral">&quot;\n Unhandled IMdl_info::Kind found!\n&quot;</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Prints the program usage</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> usage(<span class="keyword">const</span> <span class="keywordtype">char</span> *name)</div>
<div class="line">{</div>
<div class="line">    std::cout</div>
<div class="line">        &lt;&lt; <span class="stringliteral">&quot;usage: &quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot; [options]\n&quot;</span></div>
<div class="line">        &lt;&lt; <span class="stringliteral">&quot;--help, -h            print this text\n&quot;</span></div>
<div class="line">        &lt;&lt; <span class="stringliteral">&quot;--filter, -f &lt;kind&gt;   discovery filter, can occur multiple times\n&quot;</span></div>
<div class="line">        &lt;&lt; <span class="stringliteral">&quot;                      Valid values are: DK_PACKAGE DK_MODULE DK_XLIFF DK_TEXTURE\n&quot;</span></div>
<div class="line">        &lt;&lt; <span class="stringliteral">&quot;                      DK_LIGHTPROFILE DK_MEASURED_BSDF DK_ALL(default)\n&quot;</span></div>
<div class="line">        &lt;&lt; <span class="stringliteral">&quot;--mdl_path, -m &lt;path&gt; mdl search path, can occur multiple times\n&quot;</span></div>
<div class="line">        &lt;&lt; <span class="stringliteral">&quot;                      if none is provided, the example search path is used\n&quot;</span>;</div>
<div class="line">    exit(EXIT_FAILURE);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">//-----------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="keywordtype">int</span> MAIN_UTF8(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div>
<div class="line">{</div>
<div class="line">    mi::examples::mdl::Configure_options options;</div>
<div class="line">    vector&lt;string&gt;  kind_filter;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (argc &gt; 1) {</div>
<div class="line">        <span class="comment">// Collect command line arguments, if any argument is set</span></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; argc; ++i) {</div>
<div class="line">            <span class="keyword">const</span> <span class="keywordtype">char</span> *opt = argv[i];</div>
<div class="line">            <span class="keywordflow">if</span> ((strcmp(opt, <span class="stringliteral">&quot;--filter&quot;</span>) == 0) || (strcmp(opt, <span class="stringliteral">&quot;-f&quot;</span>) == 0)) {</div>
<div class="line">                <span class="keywordflow">if</span> (i &lt; argc - 1)</div>
<div class="line">                    kind_filter.push_back(argv[++i]);</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                    usage(argv[0]);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((strcmp(opt, <span class="stringliteral">&quot;--help&quot;</span>) == 0) || (strcmp(opt, <span class="stringliteral">&quot;-h&quot;</span>) == 0)) {</div>
<div class="line">                usage(argv[0]);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((strcmp(opt, <span class="stringliteral">&quot;--mdl_path&quot;</span>) == 0) || (strcmp(opt, <span class="stringliteral">&quot;-m&quot;</span>) == 0)) {</div>
<div class="line">                <span class="keywordflow">if</span> (i &lt; argc - 1)</div>
<div class="line">                    options.additional_mdl_paths.push_back(argv[++i]);</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                    usage(argv[0]);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot;Unknown option: \&quot;&quot;</span> &lt;&lt; opt &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">                usage(argv[0]);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// disable the example search path if search path options are present</span></div>
<div class="line">        <span class="keywordflow">if</span> (options.additional_mdl_paths.size() &gt; 0) {</div>
<div class="line">            options.add_example_search_path = <span class="keyword">false</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// disable admin and user space search paths to limit the output to only</span></div>
<div class="line">    <span class="comment">// the user input or the example content if the example was started without</span></div>
<div class="line">    <span class="comment">// parameters. Note, that real applications should always consider the</span></div>
<div class="line">    <span class="comment">// the admin and user space search paths.</span></div>
<div class="line">    options.add_admin_space_search_paths = <span class="keyword">false</span>;</div>
<div class="line">    options.add_user_space_search_paths = <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Configure filtering by IMdl_info::Kind</span></div>
<div class="line">    <a class="code" href="group__mi__base__types.html#ga607bb87332bf166dbd67cb30ca30da3a" title="32-bit unsigned integer. ">mi::Uint32</a> discover_filter = IMdl_info::DK_ALL;</div>
<div class="line">    <span class="keywordflow">if</span> (kind_filter.size() &gt; 0) {</div>
<div class="line">        discover_filter = IMdl_info::DK_PACKAGE;</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; filter : kind_filter)</div>
<div class="line">            discover_filter |= string_to_DK(filter);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Access the MDL SDK</span></div>
<div class="line">    <a class="code" href="classmi_1_1base_1_1Handle.html" title="Handle class template for interfaces, automatizing the lifetime control via reference counting...">mi::base::Handle&lt;mi::neuraylib::INeuray&gt;</a> neuray(mi::examples::mdl::load_and_get_ineuray());</div>
<div class="line">    <span class="keywordflow">if</span> (!neuray.is_valid_interface())</div>
<div class="line">        exit_failure(<span class="stringliteral">&quot;Failed to load the SDK.&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Configure the MDL SDK</span></div>
<div class="line">    <span class="keywordflow">if</span> (!mi::examples::mdl::configure(neuray.get(), options))</div>
<div class="line">        exit_failure(<span class="stringliteral">&quot;Failed to initialize the SDK.&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Start the MDL SDK</span></div>
<div class="line">    <a class="code" href="group__mi__base__types.html#gafcdcb44319b0596ee8a9a44fddaec8c6" title="32-bit signed integer. ">mi::Sint32</a> ret = neuray-&gt;start();</div>
<div class="line">    <span class="keywordflow">if</span> (ret != 0)</div>
<div class="line">        exit_failure(<span class="stringliteral">&quot;Failed to initialize the SDK. Result code: %d&quot;</span>, ret);</div>
<div class="line"></div>
<div class="line">    {</div>
<div class="line">        vector&lt;string&gt; mdl_files;</div>
<div class="line"></div>
<div class="line">        chrono::time_point&lt;chrono::system_clock&gt; start, end;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Load discovery API</span></div>
<div class="line">        <a class="code" href="classmi_1_1base_1_1Handle.html" title="Handle class template for interfaces, automatizing the lifetime control via reference counting...">mi::base::Handle&lt;mi::neuraylib::IMdl_discovery_api&gt;</a> discovery_api(</div>
<div class="line">            neuray-&gt;get_api_component&lt;<a class="code" href="classmi_1_1neuraylib_1_1IMdl__discovery__api.html" title="Interface for the discovery API. ">mi::neuraylib::IMdl_discovery_api</a>&gt;());</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Create root package</span></div>
<div class="line">        start = chrono::system_clock::now();</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Get complete graph</span></div>
<div class="line">        <a class="code" href="classmi_1_1base_1_1Handle.html" title="Handle class template for interfaces, automatizing the lifetime control via reference counting...">mi::base::Handle&lt;const mi::neuraylib::IMdl_discovery_result&gt;</a></div>
<div class="line">            disc_result(discovery_api-&gt;discover(discover_filter));</div>
<div class="line"></div>
<div class="line">        end = chrono::system_clock::now();</div>
<div class="line">        chrono::duration&lt;double&gt; elapsed_seconds = end - start;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (disc_result != <span class="keyword">nullptr</span>)</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">const</span> <a class="code" href="classmi_1_1base_1_1Handle.html" title="Handle class template for interfaces, automatizing the lifetime control via reference counting...">mi::base::Handle&lt;const mi::neuraylib::IMdl_package_info&gt;</a> root(</div>
<div class="line">                disc_result-&gt;get_graph());</div>
<div class="line"></div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;\nsearch path&quot;</span>;</div>
<div class="line">            <a class="code" href="group__mi__base__types.html#gaa8e6476e3c0fc948ef75264572568791" title="Unsigned integral type that is large enough to hold the size of all types. ">mi::Size</a> num = disc_result-&gt;get_search_paths_count();</div>
<div class="line">            <span class="comment">// Exclude &#39;.&#39;</span></div>
<div class="line">            <span class="keywordflow">if</span> (num &gt; 1)</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;s: \n&quot;</span>;</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;: \n&quot;</span>;</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">for</span> (<a class="code" href="group__mi__base__types.html#gaa8e6476e3c0fc948ef75264572568791" title="Unsigned integral type that is large enough to hold the size of all types. ">mi::Size</a> i = 0; i &lt; num; i++)</div>
<div class="line">                cout &lt;&lt; disc_result-&gt;<a class="code" href="classmi_1_1neuraylib_1_1IMdl__package__info.html#a66eca3110a1b4f796262e495c4b772af" title="Returns a search path in the local file system where this package has been found. ...">get_search_path</a>(i) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;\n -------------------- MDL graph --------------------\n&quot;</span>;</div>
<div class="line">            log_api_package(root.get(), 0);</div>
<div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;\n ------------------ \\ MDL graph --------------------\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Print traverse benchmark result</span></div>
<div class="line">            stringstream m;</div>
<div class="line">            m &lt;&lt; <span class="stringliteral">&quot;\nTraversed search path(s) &quot;</span>;</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> p = 0; p &lt; options.additional_mdl_paths.size(); ++p)</div>
<div class="line">                m &lt;&lt; options.additional_mdl_paths[p] &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line">            m &lt;&lt; <span class="stringliteral">&quot;in &quot;</span> &lt;&lt; elapsed_seconds.count() &lt;&lt; <span class="stringliteral">&quot; seconds \n\n&quot;</span>;</div>
<div class="line">            cerr &lt;&lt; m.str();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            cerr &lt;&lt; <span class="stringliteral">&quot;Failed to create collapsing graph out of search path &quot;</span></div>
<div class="line">                 &lt;&lt; options.additional_mdl_paths[0] &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"></div>
<div class="line">        discovery_api = 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Shut down the MDL SDK</span></div>
<div class="line">    <span class="keywordflow">if</span> (neuray-&gt;shutdown() != 0)</div>
<div class="line">        exit_failure(<span class="stringliteral">&quot;Failed to shutdown the SDK.&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Unload the MDL SDK</span></div>
<div class="line">    neuray = <span class="keyword">nullptr</span>;</div>
<div class="line">    <span class="keywordflow">if</span> (!mi::examples::mdl::unload())</div>
<div class="line">        exit_failure(<span class="stringliteral">&quot;Failed to unload the SDK.&quot;</span>);</div>
<div class="line"></div>
<div class="line">    exit_success();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Convert command line arguments to UTF8 on Windows</span></div>
<div class="line">COMMANDLINE_TO_UTF8</div>
</div><!-- fragment --><div align="right"> [<a class="el" href="mi_neuray_example_create_module.html">Previous</a>] [<a class="el" href="mi_neuray_examples.html">Up</a>] [<a class="el" href="mi_neuray_example_mdl_browser.html">Next</a>] </div> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path">
<span class="footeritem">5&#160;April&#160;2022,&#160;20:40, rev.358266</span>
<span class="footeritem"><a href="https://www.nvidia.com/en-us/about-nvidia/legal-info/" target="_blank" shape="rect">&copy; 2022 NVIDIA&nbsp;Corporation.</a> All rights reserved.</span>
</div>
</body>
</html>
