<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Example for MDL Modules</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="images/arcicon.ico" rel="shortcut icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_custom_stylesheet_1_8_4.css" rel="stylesheet" type="text/css"/>
<link rel='stylesheet' href='webfonts/librebaskerville/stylesheet.css' type='text/css'/>
<link rel='stylesheet' href='webfonts/sourcesanspro/stylesheet.css' type='text/css'/>
<!--ARC-->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="blackheader">
<span id="blackheader_title">MDL SDK API</span>
<span>
<img src="images/nvidia_logo_transpbg.gif" alt="nvidia_logo_transpbg.gif" style=" height:1.25em; width:6.806em;"/></span>
<span id="blackheader_uplink">
<a href='../index.html' class='top_page_nav'>Up</a>
</span>
</div>
<!--
<div id="titlearea">
   <span id="projectname">
     <a id="titlelink" href="../../index.html">
       MDL SDK API
     </a>
   </span>
     <a id="projectlogo" href="http://www.nvidia-arc.com">
       <img alt="NVIDIA logo" src="images/nvidia_logo.png" style="height:2em;">
       </a>
     <a href='../index.html' class='top_page_nav'>Up</a>
</div>
-->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mi_neuray_example_modules_python.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Example for MDL Modules </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div align="right"> [<a class="el" href="mi_neuray_example_start_shutdown_python.html">Previous</a>] [<a class="el" href="mi_neuray_bindings_python.html">Up</a>] </div><p>This example loads an MDL module and inspects it contents.</p>
<h1><a class="anchor" id="example_modules_python_new"></a>
New Topics</h1>
<ul>
<li>Configuration of the MDL SDK</li>
<li>Loading of MDL modules</li>
<li>Enumerating the contents of MDL modules</li>
<li>Inspecting the parameters of material and function definitions</li>
</ul>
<h1><a class="anchor" id="example_modules_python_descr"></a>
Detailed Description</h1>
<dl>
<dt><b> Configuration of the MDL SDK </b> </dt>
<dd><p class="startdd"><br/>
 In order to allow the the MDL SDK to locate MDL modules and its resources in the file system it is necessary to configure the MDL module search path. This is done by calling <a class="el" href="classmi_1_1neuraylib_1_1IMdl__configuration.html#a282eca470ca15023059c81975c97fb93" title="Adds a path to the list of paths to search for MDL modules. ">mi::neuraylib::IMdl_configuration::add_mdl_path()</a>. There are more options to control the behavior of the SDK globally, like <code>materials_are_functions</code>, which is enabled by default.</p>
<div class="fragment"><div class="line"><span class="preprocessor"># get the component using a context manager</span></div>
<div class="line"><span class="preprocessor"></span>with neuray.<a class="code" href="classmi_1_1neuraylib_1_1INeuray.html#a4e107568bbb0e64f61fb4b59b93607fa" title="Returns an API component from the MDL SDK API. ">get_api_component</a>(pymdlsdk.IMdl_configuration) as cfg:</div>
<div class="line">    cfg.add_mdl_path(<span class="stringliteral">&#39;/home/user/mdl&#39;</span>)</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">    # unify the handling of materials and functions</span></div>
<div class="line"><span class="preprocessor">    cfg.set_materials_are_functions(True)</span></div>
</div><!-- fragment --><p>Our example module <code>::nvidia::sdk_examples::tutorials</code> makes use of textures. The support for image formats in the the MDL SDK is provided by image plugins, which have to be loaded explicitly via <a class="el" href="classmi_1_1neuraylib_1_1IPlugin__configuration.html#aa8660748a128a9bb925c831dbbf05a0b" title="Loads a plugin library. ">mi::neuraylib::IPlugin_configuration::load_plugin_library()</a>.</p>
<p>The Python bindings provide a helper function for loading plugins as well. The file extension can be omitted to platform dependent code.</p>
<div class="fragment"><div class="line"><span class="preprocessor"># Load the &#39;nv_freeimage&#39; plug-in</span></div>
<div class="line"><span class="preprocessor"></span><span class="keywordflow">if</span> not pymdlsdk.load_plugin(neuray, <span class="stringliteral">&#39;nv_freeimage&#39;</span>):</div>
<div class="line">    <span class="keyword">raise</span> Exception(<span class="stringliteral">&#39;Failed to load the \&#39;nv_freeimage\&#39; plugin.&#39;</span>)</div>
</div><!-- fragment --><p class="enddd"></p>
</dd>
<dt><b> Loading of MDL modules </b> </dt>
<dd><p class="startdd"><br/>
 MDL modules are loaded with the method <a class="el" href="classmi_1_1neuraylib_1_1IMdl__impexp__api.html#a5e195d80915190eb40c5995ccfeaa4c9" title="Loads an MDL module from disk (or a builtin module) into the database. ">mi::neuraylib::IMdl_impexp_api::load_module()</a>. Note that this method expects the module name, not the name of the file containing the module. To find the corresponding file it is necessary to configure the module search path as described above.</p>
<p>To load a module the <code>IMdl_impexp_api</code> component is acquired first. It is good practice to also create an optional context in order to get detailed log messages. </p>
<div class="fragment"><div class="line">with neuray.<a class="code" href="classmi_1_1neuraylib_1_1INeuray.html#a4e107568bbb0e64f61fb4b59b93607fa" title="Returns an API component from the MDL SDK API. ">get_api_component</a>(pymdlsdk.IMdl_impexp_api) as imp_exp, \</div>
<div class="line">    neuray.get_api_component(pymdlsdk.IMdl_factory) as mdl_factory, \</div>
<div class="line">    mdl_factory.<a class="code" href="classmi_1_1neuraylib_1_1IMdl__factory.html#a78a9a6489592c90ea49e0fe0ac8be235" title="Creates an execution context. ">create_execution_context</a>() as context:</div>
<div class="line"></div>
<div class="line">    res = imp_exp.load_module(transaction, module_mdl_name, context)</div>
</div><!-- fragment --><p class="enddd"></p>
</dd>
<dt><b> Enumerating the contents of MDL modules </b> </dt>
<dd><p class="startdd"><br/>
 The <a class="el" href="classmi_1_1neuraylib_1_1IModule.html" title="This interface represents an MDL module. ">mi::neuraylib::IModule</a> interface offers various methods related to metadata, like the name of the module, or the name of the file it was loaded from. Furthermore, it offers methods to enumerate the material and function definitions contained in the module. It also allows to enumerate all modules that have been (directly) imported by that module. Imported modules will be automatically loaded (if not already loaded before).</p>
<p class="enddd"></p>
</dd>
<dt><b> Inspecting the parameters of material and function definitions </b> </dt>
<dd><p class="startdd"><br/>
 MDL materials and functions (as found in a <code></code>.mdl file) are represented in the MDL SDK API by the interface. Similar to the module interface this interface offers various methods related to metadata, like the name of the definition, or the name of the containing module. Important methods are those that provide details about the parameters, like their names, types, and the values of defaults (if present).</p>
<p>In this example we simply print the parameter information for a selected material and the exported elements of the parenting module.</p>
<p>To read information about a module that has been loaded before it has to accessed using a transaction. </p>
<div class="fragment"><div class="line">with transaction.access_as(pymdlsdk.IModule, module_db_name) as module:</div>
<div class="line">    <span class="keywordflow">if</span> not module.is_valid_interface():</div>
<div class="line">        <span class="keywordflow">return</span></div>
<div class="line">    print(<span class="stringliteral">&quot;MDL Qualified Name: %s&quot;</span> % module.get_mdl_name())</div>
<div class="line">    print(<span class="stringliteral">&quot;MDL Simple Name: %s&quot;</span> % module.get_mdl_simple_name())</div>
</div><!-- fragment --><p>Compared to the native API, there are two access functions. The <code>access_as</code> used above returns an object of a given type, in this case <code>IModule</code>. The <code>access</code> functions returns a generic interface and the type has to be queried manually.</p>
<p class="enddd"></p>
</dd>
</dl>
<p><b>Source Code Location:</b><br/>
 <code>examples/mdl_python/modules/example_modules.py</code></p>
<div align="right"> [<a class="el" href="mi_neuray_example_start_shutdown_python.html">Previous</a>] [<a class="el" href="mi_neuray_bindings_python.html">Up</a>] </div> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path">
<span class="footeritem">5&#160;April&#160;2022,&#160;20:40, rev.358266</span>
<span class="footeritem"><a href="https://www.nvidia.com/en-us/about-nvidia/legal-info/" target="_blank" shape="rect">&copy; 2022 NVIDIA&nbsp;Corporation.</a> All rights reserved.</span>
</div>
</body>
</html>
