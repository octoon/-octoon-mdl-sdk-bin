<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>MDL Python Bindings</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="images/arcicon.ico" rel="shortcut icon" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_custom_stylesheet_1_8_4.css" rel="stylesheet" type="text/css"/>
<link rel='stylesheet' href='webfonts/librebaskerville/stylesheet.css' type='text/css'/>
<link rel='stylesheet' href='webfonts/sourcesanspro/stylesheet.css' type='text/css'/>
<!--ARC-->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="blackheader">
<span id="blackheader_title">MDL SDK API</span>
<span>
<img src="images/nvidia_logo_transpbg.gif" alt="nvidia_logo_transpbg.gif" style=" height:1.25em; width:6.806em;"/></span>
<span id="blackheader_uplink">
<a href='../index.html' class='top_page_nav'>Up</a>
</span>
</div>
<!--
<div id="titlearea">
   <span id="projectname">
     <a id="titlelink" href="../../index.html">
       MDL SDK API
     </a>
   </span>
     <a id="projectlogo" href="http://www.nvidia-arc.com">
       <img alt="NVIDIA logo" src="images/nvidia_logo.png" style="height:2em;">
       </a>
     <a href='../index.html' class='top_page_nav'>Up</a>
</div>
-->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mi_neuray_bindings_python.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MDL Python Bindings </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>To give Python developers access to the MDL SDK we offer a low-level Python API generated from the C++ interfaces using SWIG.</p>
<p>The usage of the bindings is meant to be very similar to the original native interface in order to offer the same functionality and to allow porting of C++ applications and examples easily. Furthermore, it allows the developer to refer to the native API documentation to a large extend.</p>
<h1><a class="anchor" id="mi_neuray_bindings_python_compile"></a>
Compiling the Binding Module</h1>
<p>The binding is generated using a tool called <code>SWIG</code>. The result of that generation consists of two parts. A C++ file <code>mdl_python_swig.cpp</code> that needs to be compiled and linked against the Python libraries to create the actual binding module. And second, a small Python module <code>pymdlsdk.py</code> that imports the main binding module. It contains documentation, special extension functions that only exist for the Python bindings, and it forwards all function calls to the main binding module.</p>
<p>With the MDL SDK, we provide a CMake-based build system that also compiles the generated C++ code and links it against given Python development libraries to create the main binding module. The reason for compiling this here is that the bindings work only with a specific python version, the one that matches the version of the interpreter that runs your application.</p>
<p>Besides the generated <code>mdl_python_swig.cpp</code>, additional source and header files are required to build the main binding module: <code>mdl_python.h</code> and <code>mdl_python.cpp</code>. These files contain additional utility functions, e.g., to load the native SDK as well as plugins.</p>
<p>After building the bindings successfully, the binding will consist of two files:</p>
<ul>
<li><code>pymdlsdk.py</code> </li>
<li><code>_pymdlsdk.so</code> (or <code>_pymdlsdk.pyd</code> on windows)</li>
</ul>
<h1><a class="anchor" id="mi_neuray_bindings_python_refcounts"></a>
Reference Counting</h1>
<p>One major difference between the MDL Python bindings and the MDL SDK is the absence of <code>mi::Handle</code> objects for reference counting. Nevertheless, reference counting is also important in Python, but it happens mostly in the background.</p>
<p>All MDL objects returned by the binding implement the context manager pattern. It is recommended to hold MDL objects using the <code>with</code> statement. It guarantees that the object is freed properly when leaving the <code>with</code> block:</p>
<div class="fragment"><div class="line">with neuray.get_api_component(pymdlsdk.IMdl_configuration) as cfg:</div>
<div class="line">    cfg.add_mdl_path(<span class="stringliteral">&#39;/home/user/mdl&#39;</span>)</div>
</div><!-- fragment --><p>Note, that multiple of those blocks can be combined to improve readability:</p>
<div class="fragment"><div class="line">with neuray.get_api_component(pymdlsdk.IMdl_factory) as mdl_factory, \</div>
<div class="line">    mdl_factory.create_type_factory(transaction) as type_factory, \</div>
<div class="line">    mdl_factory.create_value_factory(transaction) as value_factory:</div>
</div><!-- fragment --><p>The alternative way to make sure MDL objects are disposed properly is to release them manually using their <code>release()</code> function or by assigning <code>None:</code> </p>
<div class="fragment"><div class="line">context = mdl_factory.create_execution_context()</div>
<div class="line"><span class="preprocessor"># ...</span></div>
<div class="line"><span class="preprocessor">context.release() # same as: context = None</span></div>
</div><!-- fragment --><p>Relaying on the fact that Python is taking care of the reference counting is possible as well but not recommended. While this works in well to free local objects when leaving the scope of functions, it might not work well when garbage collection is required. The MDL SDK relies on the disposal of objects in some use cases, for instance when accessing database objects and committing or aborting transactions. To avoid such problems in general, we advise to thoughtfully deal with the lifetime of MDL objects by either using context managers or the manual releasing of objects.</p>
<h1><a class="anchor" id="mi_neuray_bindings_python_getting_started"></a>
Getting Started</h1>
<p>We provide examples for the use of the MDL Python Bindings that illustrate -- in a tutorial manner -- the important interfaces and concepts.</p>
<p>For using the MDL Python bindings the native MDL SDK library as well as the used native plugins need to available. The native files can be added to the the system PATH on Windows, the LD_LIBRARY_PATH on Linux, or DYLD_LIBRARY_PATH on MacOS. The path to the native libraries can also be passed with the <code>load_and_get_ineuray()</code> function. Details on that can be found in the documentation for the <a class="el" href="mi_neuray_example_start_shutdown_python.html">Example for Starting and Shutting Down the MDL SDK</a>.</p>
<p>After running CMake and building the bindings, we provide several ways to run and debug the Python examples.</p>
<ul>
<li>In the CMake build directory, a generated <code>vscode-workspace</code> file can be found. This can be opened by <code>Visual</code> <code>Studio</code> <code>Code</code> on all platforms. To run an example, the corresponding Python script has to be the currently opened and visible file. Pressing <code>F5</code> on the keyboard will ask for a build configuration. This has to match the version selected while building the bindings. After confirming the selection, the example script will start.</li>
<li>Alternatively, generated shell scripts called <code>run_example.sh</code> are created in the CMake build directory sub-folders of the individual examples, e.g., <code>examples\mdl_python\start_shutdown\run_example.sh</code>. Running the scripts will add the native libraries to the system PATH, add the MDL Python Bindings to the PYTHONPATH, and start the Python interpreter that was selected during <code>CMake</code> <code>Configure</code>.</li>
<li>On Windows, the generated <code>Visual</code> <code>Studio</code> <code>solution</code> will have projects for the Python example as well. They can also be started from the IDE similar to the native examples. However, these projects will allow to debug the C++ side of the bindings or the SDK whereas VS Code can be used to debug the Python code.</li>
</ul>
<h1><a class="anchor" id="mi_neuray_bindings_python_examples"></a>
Examples</h1>
<ul>
<li><a class="el" href="mi_neuray_example_start_shutdown_python.html">Example for Starting and Shutting Down the MDL SDK</a> <br/>
 Starts and shuts down the MDL SDK API using the Python bindings.</li>
<li><a class="el" href="mi_neuray_example_modules_python.html">Example for MDL Modules</a> <br/>
 Loads an MDL module and inspects its contents. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path">
<span class="footeritem">5&#160;April&#160;2022,&#160;20:40, rev.358266</span>
<span class="footeritem"><a href="https://www.nvidia.com/en-us/about-nvidia/legal-info/" target="_blank" shape="rect">&copy; 2022 NVIDIA&nbsp;Corporation.</a> All rights reserved.</span>
</div>
</body>
</html>
